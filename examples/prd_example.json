{
  "title": "Product Requirements Document - Loan Management System",
  "version": "1.0",
  "entities": [
    {
      "name": "customer_accounts",
      "type": "table",
      "description": "Customer account information",
      "business_meaning": "Stores all customer account details including personal information and account status",
      "attributes": ["customer_id", "account_number", "account_status", "opening_date"]
    },
    {
      "name": "loan_transactions",
      "type": "table",
      "description": "Loan transaction records",
      "business_meaning": "Tracks all loan-related transactions including disbursements and repayments",
      "attributes": ["transaction_id", "loan_id", "transaction_type", "amount", "transaction_date"]
    }
  ],
  "business_rules": [
    {
      "id": "BR001",
      "description": "Active loans must have a valid customer account",
      "condition": "loan.status = 'ACTIVE' AND customer_accounts.account_status = 'ACTIVE'",
      "applies_to": ["loans", "customer_accounts"],
      "priority": "high"
    },
    {
      "id": "BR002",
      "description": "Loan repayments must be positive amounts",
      "condition": "loan_transactions.transaction_type = 'REPAYMENT' AND loan_transactions.amount > 0",
      "applies_to": ["loan_transactions"],
      "priority": "medium"
    }
  ],
  "metrics": [
    {
      "name": "total_outstanding",
      "definition": "Total outstanding loan amount across all active loans",
      "calculation": "SUM(loans.principal_outstanding) WHERE loans.status = 'ACTIVE'",
      "related_entities": ["loans", "customer_accounts"]
    },
    {
      "name": "monthly_collection_rate",
      "definition": "Percentage of loans with successful monthly collections",
      "calculation": "COUNT(loans with successful payment) / COUNT(all active loans) * 100",
      "related_entities": ["loans", "loan_transactions"]
    }
  ],
  "use_cases": [
    {
      "id": "UC001",
      "title": "View Customer Loan History",
      "description": "System should allow viewing all loans for a customer",
      "actors": ["customer_service_rep", "loan_officer"],
      "steps": [
        "Search customer by ID or account number",
        "Retrieve all loans for customer",
        "Display loan history with transaction details"
      ],
      "related_entities": ["customer_accounts", "loans", "loan_transactions"]
    }
  ],
  "relationships": [
    {
      "from_entity": "customer_accounts",
      "to_entity": "loans",
      "type": "one-to-many",
      "description": "A customer can have multiple loans"
    }
  ]
}

