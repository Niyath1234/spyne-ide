{
  "title": "ER Diagram - Loan Management System",
  "version": "1.0",
  "entities": [
    {
      "name": "customer_accounts",
      "type": "table",
      "description": "Customer account information",
      "primary_key": ["customer_id"],
      "attributes": [
        {
          "name": "customer_id",
          "type": "bigint",
          "primary_key": true
        },
        {
          "name": "account_number",
          "type": "varchar(50)"
        },
        {
          "name": "account_status",
          "type": "varchar(20)"
        }
      ]
    },
    {
      "name": "loans",
      "type": "table",
      "description": "Loan records",
      "primary_key": ["loan_id"],
      "attributes": [
        {
          "name": "loan_id",
          "type": "bigint",
          "primary_key": true
        },
        {
          "name": "customer_id",
          "type": "bigint",
          "foreign_key": "customer_accounts.customer_id"
        },
        {
          "name": "principal_amount",
          "type": "decimal(15,2)"
        },
        {
          "name": "status",
          "type": "varchar(20)"
        }
      ]
    },
    {
      "name": "loan_transactions",
      "type": "table",
      "description": "Loan transaction records",
      "primary_key": ["transaction_id"],
      "attributes": [
        {
          "name": "transaction_id",
          "type": "bigint",
          "primary_key": true
        },
        {
          "name": "loan_id",
          "type": "bigint",
          "foreign_key": "loans.loan_id"
        },
        {
          "name": "transaction_type",
          "type": "varchar(50)"
        },
        {
          "name": "amount",
          "type": "decimal(15,2)"
        }
      ]
    }
  ],
  "relationships": [
    {
      "from_entity": "customer_accounts",
      "to_entity": "loans",
      "type": "one-to-many",
      "description": "A customer can have multiple loans",
      "join_keys": {
        "customer_id": "customer_id"
      }
    },
    {
      "from_entity": "loans",
      "to_entity": "loan_transactions",
      "type": "one-to-many",
      "description": "A loan can have multiple transactions",
      "join_keys": {
        "loan_id": "loan_id"
      }
    }
  ],
  "joins": [
    {
      "from_table": "customer_accounts",
      "to_table": "loans",
      "join_type": "left_join",
      "keys": {
        "customer_id": "customer_id"
      },
      "condition": "customer_accounts.customer_id = loans.customer_id",
      "description": "Join customer accounts to loans"
    },
    {
      "from_table": "loans",
      "to_table": "loan_transactions",
      "join_type": "left_join",
      "keys": {
        "loan_id": "loan_id"
      },
      "condition": "loans.loan_id = loan_transactions.loan_id",
      "description": "Join loans to transactions"
    }
  ]
}

